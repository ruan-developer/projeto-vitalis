<div class="min-h-screen">
  <div class="container">
    <div class="header-section">
      <h1>Minha Jornada</h1>
      <p>Veja a sua história de autocuidado com a Vitalis.</p>
    </div>

    <div class="weekly-stats-grid">
      <div class="card weekly-stat-item">
        <div class="card-content text-center">
          <i class="ri-leaf-line"></i>
          <p>{{geralStats.diasAtivos}}</p>
          <p>Dias ativos</p>
        </div>
      </div>
      <div class="card weekly-stat-item">
        <div class="card-content text-center">
          <i class="ri-fire-line"></i>
          <p>{{geralStats.totalXp}}</p>
          <p>Total de XP</p>
        </div>
      </div>
      <div class="card weekly-stat-item">
        <div class="card-content text-center">
          <i class="ri-checkbox-circle-line"></i>
          <p>{{geralStats.missoesConcluidas}}</p>
          <p>Missões Concluídas</p>
        </div>
      </div>
      <div class="card weekly-stat-item">
        <div class="card-content text-center">
          <i class="ri-edit-line"></i>
          <p>{{geralStats.reflexoesEscritas}}</p>
          <p>Reflexões escritas</p>
        </div>
      </div>
    </div>

    <div class="tabs">
      <div class="tabs-list" role="tablist">
        <button class="tabs-trigger" [class.active]="activeTab === 'vital'" (click)="setActiveTab('vital')" role="tab"
          [attr.aria-selected]="activeTab === 'vital'">
          <i class="ri-leaf-fill"></i>
          Estação Vital
        </button>
        <button class="tabs-trigger" [class.active]="activeTab === 'stats'" (click)="setActiveTab('stats')" role="tab"
          [attr.aria-selected]="activeTab === 'stats'">
          <i class="ri-bar-chart-2-fill"></i>
          Estatísticas
        </button>
        <button class="tabs-trigger" [class.active]="activeTab === 'achievements'"
          (click)="setActiveTab('achievements')" role="tab" [attr.aria-selected]="activeTab === 'achievements'">
          <i class="ri-medal-fill"></i>
          Conquistas
        </button>
        <button class="tabs-trigger" [class.active]="activeTab === 'history'" (click)="setActiveTab('history')"
          role="tab" [attr.aria-selected]="activeTab === 'history'">
          <i class="ri-time-fill"></i>
          Histórico
        </button>
      </div>

      <div id="vital-content" class="tabs-content" [class.active]="activeTab === 'vital'">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="ri-fire-fill"></i> XP da Semana
            </h2>
          </div>
          <div class="card-content">
            <canvas baseChart [data]="chartData" [options]="chartOptions" [type]="chartType">
            </canvas>
          </div>
        </div>
        <div class="xp-summary summary-box">
          <p>
            <span class="font-semibold text-vitalis-primary">{{mostProductiveDay.dia}}</span>
            foi seu dia mais produtivo com
            <span class="font-semibold text-vitalis-primary"> {{mostProductiveDay.valor}} XP</span>!
          </p>
        </div>
      </div>
    </div>
  </div>

  <div id="stats-content" class="tabs-content" [class.active]="activeTab === 'stats'">
    <div class="stats-grid">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Emoções Registradas</h2>
        </div>
        <div class="card-content">
          <div class="space-y-4">
            <div class="emotion-item">
              <div class="emotion-item-left">
                <div class="emotion-color-box bg-green-400"></div>
                <span class="text-vitalis-text">Tranquilo</span>
              </div>
              <span class="font-semibold text-vitalis-text">12</span>
            </div>
            <div class="emotion-item">
              <div class="emotion-item-left">
                <div class="emotion-color-box bg-blue-400"></div>
                <span class="text-vitalis-text">Motivado</span>
              </div>
              <span class="font-semibold text-vitalis-text">8</span>
            </div>
            <div class="emotion-item">
              <div class="emotion-item-left">
                <div class="emotion-color-box bg-yellow-400"></div>
                <span class="text-vitalis-text">Ansioso</span>
              </div>
              <span class="font-semibold text-vitalis-text">5</span>
            </div>
            <div class="emotion-item">
              <div class="emotion-item-left">
                <div class="emotion-color-box bg-gray-400"></div>
                <span class="text-vitalis-text">Triste</span>
              </div>
              <span class="font-semibold text-vitalis-text">3</span>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Resumo Geral</h2>
        </div>
        <div class="card-content">
          <div class="space-y-6 general-summary-section">
            <div>
              <p>12 min</p>
              <p>Tempo médio de uso</p>
            </div>
            <div class="summary-grid">
              <div>
                <p>28</p>
                <p>Consultas</p>
              </div>
              <div>
                <p>45</p>
                <p>Vídeos</p>
              </div>
              <div>
                <p>89</p>
                <p>Registros</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="achievements-content" class="tabs-content" [class.active]="activeTab === 'achievements'">
    <div class="achievements-controls">
      <label class="filter-switch">
        <input type="checkbox" [(ngModel)]="showCompletedOnly" />
        <span class="slider"></span>
        <span class="label-text">
          {{ showCompletedOnly ? 'Concluídas' : 'Pendentes' }}
        </span>
      </label>

      <div class="sort-dropdown">
        <button (click)="toggleSortDropdown()" class="sort-button">
          <i class="ri-arrow-up-down-line"></i>
        </button>
        <div class="sort-options" *ngIf="showSortDropdown">
          <button (click)="setSortOrder('desc')">Mais recentes</button>
          <button (click)="setSortOrder('asc')">Mais antigas</button>
        </div>
      </div>
    </div>

    <div class="achievements-list">
      <div class="card achievement-item" *ngFor="let achievement of filteredAchievements">
        <div class="achievement-content">
          <div class="achievement-icon-wrapper" [ngClass]="achievement.status">
            <i [ngClass]="{
              'ri-checkbox-circle-line': achievement.status === 'completa',
              'ri-time-line': achievement.status === 'pendente'
            }"></i>
          </div>

          <div class="achievement-text-content">
            <h3 class="font-semibold text-vitalis-text mb-1">
              {{ achievement.titulo }}
            </h3>
            <p class="text-sm text-vitalis-text/60 mb-3">
              {{ achievement.descricao }}
            </p>

            <span class="completed-date" *ngIf="achievement.status === 'completa'">
              {{ getRelativeDate(achievement.dataConquista) }}
            </span>

            <div *ngIf="achievement.status === 'pendente' && achievement.progressoAtual !== undefined"
              class="progress-container">
              <div class="progress-bar">
                <div class="progress-fill"
                  [style.width.%]="(achievement.progressoAtual / achievement.progressoTotal) * 100"></div>
              </div>
              <p class="progress-text">
                {{ achievement.progressoAtual }} de
                {{ achievement.progressoTotal }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div id="history-content" class="tabs-content" [class.active]="activeTab === 'history'">
    <div class="history-section">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Vídeos Recentes</h2>
        </div>
        <div class="card-content">
          <div class="recent-videos-list">
            <div class="video-item">
              <div class="video-icon-wrapper">
                <i class="ri-play-large-line"></i>
              </div>
              <div class="video-details">
                <h4 class="font-medium text-vitalis-text">
                  Respiração para Ansiedade
                </h4>
                <div class="video-meta">
                  <span class="text-sm text-vitalis-text/60">8 min</span>
                  <span class="video-category-tag">Respiração</span>
                </div>
              </div>
            </div>
            <div class="video-item">
              <div class="video-icon-wrapper">
                <i class="ri-play-large-line"></i>
              </div>
              <div class="video-details">
                <h4 class="font-medium text-vitalis-text">
                  Meditação Matinal
                </h4>
                <div class="video-meta">
                  <span class="text-sm text-vitalis-text/60">15 min</span>
                  <span class="video-category-tag">Meditação</span>
                </div>
              </div>
            </div>
            <div class="video-item">
              <div class="video-icon-wrapper">
                <i class="ri-play-large-line"></i>
              </div>
              <div class="video-details">
                <h4 class="font-medium text-vitalis-text">
                  Exercícios de Gratidão
                </h4>
                <div class="video-meta">
                  <span class="text-sm text-vitalis-text/60">5 min</span>
                  <span class="video-category-tag">Mindfulness</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <calendario></calendario>
    </div>
  </div>
</div>